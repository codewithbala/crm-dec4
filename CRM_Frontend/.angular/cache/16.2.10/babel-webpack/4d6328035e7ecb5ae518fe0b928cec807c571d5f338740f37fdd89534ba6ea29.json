{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { User } from \"../../model/user\";\nexport let LogInView = class LogInView {\n  app;\n  http;\n  router;\n  header;\n  user = new User();\n  loginError = false;\n  constructor(app, http, router, header) {\n    this.app = app;\n    this.http = http;\n    this.router = router;\n    this.header = header;\n  }\n  logIn() {\n    //console.log(this.user);\n    this.app.authenticate(this.user).subscribe(data => {\n      window.sessionStorage.setItem(\"SNVA_CRM_USER\", JSON.stringify(data));\n      this.app.registerSuccessfulLogin(this.user);\n      this.redirectUser(data.role);\n    }, error => {\n      console.log(error);\n      this.loginError = true;\n      //this.router.navigate(['login'])\n    });\n  }\n\n  redirectUser(role) {\n    if (role === 'USER') {\n      console.log(\"User\");\n      window.location.href = 'user/homepage';\n    }\n    if (role === 'ADMIN') {\n      console.log(\"Admin\");\n      window.location.href = 'admin/homepage';\n    }\n    if (role === 'SU') {\n      console.log(\"SU\");\n      //window.location.href = 'superAdmin/homepage';\n      this.router.navigate([\"superAdmin/homepage\"]);\n    }\n  }\n  resetPassword() {}\n};\nLogInView = __decorate([Component({\n  selector: 'app-log-in',\n  templateUrl: './logInView.html',\n  styleUrls: ['./logInView.css']\n})], LogInView);","map":{"version":3,"names":["Component","User","LogInView","app","http","router","header","user","loginError","constructor","logIn","authenticate","subscribe","data","window","sessionStorage","setItem","JSON","stringify","registerSuccessfulLogin","redirectUser","role","error","console","log","location","href","navigate","resetPassword","__decorate","selector","templateUrl","styleUrls"],"sources":["/Users/namcuong757/snva/copy_main2/crm-dec4/CRM_Frontend/src/app/view/logIn/logInView.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport {User} from \"../../model/user\";\nimport {AuthenticationService} from \"../../service/authentication.service\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {Router} from \"@angular/router\";\n\n@Component({\n  selector: 'app-log-in',\n  templateUrl: './logInView.html',\n  styleUrls: ['./logInView.css']\n})\nexport class LogInView\n{\n  user:User = new User();\n  loginError:boolean = false;\n  constructor(private app: AuthenticationService, private http: HttpClient, private router: Router, private header:He) {}\n  logIn()\n  {\n    //console.log(this.user);\n    this.app.authenticate(this.user).subscribe(data=>{\n        \n        window.sessionStorage.setItem(\"SNVA_CRM_USER\", JSON.stringify(data));\n        this.app.registerSuccessfulLogin(this.user);\n\n        this.redirectUser(data.role);\n      },\n      error => {\n        console.log(error);\n        this.loginError=true;\n        //this.router.navigate(['login'])\n      })\n  }\n  redirectUser(role:string)\n  {\n    if(role==='USER'){\n      console.log(\"User\")\n      window.location.href = 'user/homepage';\n    }\n    if(role==='ADMIN'){\n      console.log(\"Admin\")\n      window.location.href = 'admin/homepage';\n    }\n    if(role==='SU'){\n      console.log(\"SU\")\n      //window.location.href = 'superAdmin/homepage';\n      this.router.navigate([\"superAdmin/homepage\"]);\n    }\n  }\n  resetPassword()\n  {\n\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAAQC,IAAI,QAAO,kBAAkB;AAU9B,WAAMC,SAAS,GAAf,MAAMA,SAAS;EAIAC,GAAA;EAAoCC,IAAA;EAA0BC,MAAA;EAAwBC,MAAA;EAF1GC,IAAI,GAAQ,IAAIN,IAAI,EAAE;EACtBO,UAAU,GAAW,KAAK;EAC1BC,YAAoBN,GAA0B,EAAUC,IAAgB,EAAUC,MAAc,EAAUC,MAAS;IAA/F,KAAAH,GAAG,GAAHA,GAAG;IAAiC,KAAAC,IAAI,GAAJA,IAAI;IAAsB,KAAAC,MAAM,GAANA,MAAM;IAAkB,KAAAC,MAAM,GAANA,MAAM;EAAM;EACtHI,KAAKA,CAAA;IAEH;IACA,IAAI,CAACP,GAAG,CAACQ,YAAY,CAAC,IAAI,CAACJ,IAAI,CAAC,CAACK,SAAS,CAACC,IAAI,IAAE;MAE7CC,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,eAAe,EAAEC,IAAI,CAACC,SAAS,CAACL,IAAI,CAAC,CAAC;MACpE,IAAI,CAACV,GAAG,CAACgB,uBAAuB,CAAC,IAAI,CAACZ,IAAI,CAAC;MAE3C,IAAI,CAACa,YAAY,CAACP,IAAI,CAACQ,IAAI,CAAC;IAC9B,CAAC,EACDC,KAAK,IAAG;MACNC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MAClB,IAAI,CAACd,UAAU,GAAC,IAAI;MACpB;IACF,CAAC,CAAC;EACN;;EACAY,YAAYA,CAACC,IAAW;IAEtB,IAAGA,IAAI,KAAG,MAAM,EAAC;MACfE,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;MACnBV,MAAM,CAACW,QAAQ,CAACC,IAAI,GAAG,eAAe;;IAExC,IAAGL,IAAI,KAAG,OAAO,EAAC;MAChBE,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;MACpBV,MAAM,CAACW,QAAQ,CAACC,IAAI,GAAG,gBAAgB;;IAEzC,IAAGL,IAAI,KAAG,IAAI,EAAC;MACbE,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC;MACjB;MACA,IAAI,CAACnB,MAAM,CAACsB,QAAQ,CAAC,CAAC,qBAAqB,CAAC,CAAC;;EAEjD;EACAC,aAAaA,CAAA,GAGb;CACD;AAzCY1B,SAAS,GAAA2B,UAAA,EALrB7B,SAAS,CAAC;EACT8B,QAAQ,EAAE,YAAY;EACtBC,WAAW,EAAE,kBAAkB;EAC/BC,SAAS,EAAE,CAAC,iBAAiB;CAC9B,CAAC,C,EACW9B,SAAS,CAyCrB"},"metadata":{},"sourceType":"module","externalDependencies":[]}