{"ast":null,"code":"import { User } from \"../../model/user\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../service/authentication.service\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../nav/header/header.component\";\nimport * as i5 from \"@angular/forms\";\nexport class LogInView {\n  app;\n  http;\n  router;\n  header;\n  user = new User();\n  loginError = false;\n  constructor(app, http, router, header) {\n    this.app = app;\n    this.http = http;\n    this.router = router;\n    this.header = header;\n  }\n  logIn() {\n    //console.log(this.user);\n    this.app.authenticate(this.user).subscribe(data => {\n      window.sessionStorage.setItem(\"SNVA_CRM_USER\", JSON.stringify(data));\n      this.app.registerSuccessfulLogin(this.user);\n      this.header.setUserId();\n      this.redirectUser(data.role);\n    }, error => {\n      console.log(error);\n      this.loginError = true;\n      //this.router.navigate(['login'])\n    });\n  }\n\n  redirectUser(role) {\n    if (role === 'USER') {\n      console.log(\"User\");\n      window.location.href = 'user/homepage';\n    }\n    if (role === 'ADMIN') {\n      console.log(\"Admin\");\n      window.location.href = 'admin/homepage';\n    }\n    if (role === 'SU') {\n      console.log(\"SU\");\n      //window.location.href = 'superAdmin/homepage';\n      this.router.navigate([\"superAdmin/homepage\"]);\n    }\n  }\n  resetPassword() {}\n  static ɵfac = function LogInView_Factory(t) {\n    return new (t || LogInView)(i0.ɵɵdirectiveInject(i1.AuthenticationService), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.HeaderComponent));\n  };\n  static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LogInView,\n    selectors: [[\"app-log-in\"]],\n    decls: 25,\n    vars: 2,\n    consts: [[1, \"container\", \"box\"], [1, \"mb-4\"], [1, \"fw-bold\", \"text-center\", \"title\"], [1, \"row\", \"justify-content-center\"], [1, \"card\", \"col-12\", \"col-md-6\", \"col-lg-4\", \"border\", \"border-success-subtle\", \"cardBackGround\"], [1, \"mt-4\", \"text-center\", \"text_font\", \"text-white\"], [1, \"mb-3\", \"text-center\", \"sub-text\", \"text_font\", \"text-white\"], [3, \"submit\"], [1, \"mb-3\", \"text-start\"], [\"for\", \"username\", 1, \"form-label\", \"text_font\", \"text-white\"], [\"type\", \"text\", \"name\", \"username\", \"id\", \"username\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"password\", 1, \"form-label\", \"text_font\", \"text-white\"], [\"type\", \"password\", \"name\", \"password\", \"id\", \"password\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"container\", \"d-flex\", \"justify-content-center\", \"align-items-center\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", \"btn-long-bar\", \"mb-4\"], [1, \"text-center\", \"text_font\", \"text-white\", 3, \"click\"]],\n    template: function LogInView_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\", 2);\n        i0.ɵɵtext(3, \"SNVA CRM\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4)(6, \"h1\", 5);\n        i0.ɵɵtext(7, \"Welcome\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"p\", 6);\n        i0.ɵɵtext(9, \"Log in to continue\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"form\", 7);\n        i0.ɵɵlistener(\"submit\", function LogInView_Template_form_submit_10_listener() {\n          return ctx.logIn();\n        });\n        i0.ɵɵelementStart(11, \"div\", 8)(12, \"label\", 9);\n        i0.ɵɵtext(13, \"Email / Username\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"input\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function LogInView_Template_input_ngModelChange_14_listener($event) {\n          return ctx.user.username = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"div\", 8)(16, \"label\", 11);\n        i0.ɵɵtext(17, \"Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"input\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function LogInView_Template_input_ngModelChange_18_listener($event) {\n          return ctx.user.password = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(19, \"div\", 13)(20, \"button\", 14);\n        i0.ɵɵtext(21, \"Login\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"div\")(23, \"p\", 15);\n        i0.ɵɵlistener(\"click\", function LogInView_Template_p_click_23_listener() {\n          return ctx.resetPassword();\n        });\n        i0.ɵɵtext(24, \"Forgot Your Password?\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"ngModel\", ctx.user.username);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.user.password);\n      }\n    },\n    dependencies: [i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.NgModel, i5.NgForm],\n    styles: [\".box[_ngcontent-%COMP%]{\\n  margin-top: 150px;\\n  margin-bottom: 150px;\\n}\\n\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdmlldy9sb2dJbi9sb2dJblZpZXcuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsaUJBQWlCO0VBQ2pCLG9CQUFvQjtBQUN0QiIsInNvdXJjZXNDb250ZW50IjpbIi5ib3h7XG4gIG1hcmdpbi10b3A6IDE1MHB4O1xuICBtYXJnaW4tYm90dG9tOiAxNTBweDtcbn1cblxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["User","LogInView","app","http","router","header","user","loginError","constructor","logIn","authenticate","subscribe","data","window","sessionStorage","setItem","JSON","stringify","registerSuccessfulLogin","setUserId","redirectUser","role","error","console","log","location","href","navigate","resetPassword","i0","ɵɵdirectiveInject","i1","AuthenticationService","i2","HttpClient","i3","Router","i4","HeaderComponent","selectors","decls","vars","consts","template","LogInView_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","LogInView_Template_form_submit_10_listener","LogInView_Template_input_ngModelChange_14_listener","$event","username","LogInView_Template_input_ngModelChange_18_listener","password","LogInView_Template_p_click_23_listener","ɵɵadvance","ɵɵproperty"],"sources":["/Users/namcuong757/snva/copy_main2/crm-dec4/CRM_Frontend/src/app/view/logIn/logInView.ts","/Users/namcuong757/snva/copy_main2/crm-dec4/CRM_Frontend/src/app/view/logIn/logInView.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport {User} from \"../../model/user\";\nimport {AuthenticationService} from \"../../service/authentication.service\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {Router} from \"@angular/router\";\nimport { HeaderComponent } from '../nav/header/header.component';\n\n@Component({\n  selector: 'app-log-in',\n  templateUrl: './logInView.html',\n  styleUrls: ['./logInView.css']\n})\nexport class LogInView\n{\n  user:User = new User();\n  loginError:boolean = false;\n  constructor(private app: AuthenticationService, private http: HttpClient, private router: Router, private header:HeaderComponent) {}\n  logIn()\n  {\n    //console.log(this.user);\n    this.app.authenticate(this.user).subscribe(data=>{\n        \n        window.sessionStorage.setItem(\"SNVA_CRM_USER\", JSON.stringify(data));\n        this.app.registerSuccessfulLogin(this.user);\n        this.header.setUserId()\n        this.redirectUser(data.role);\n      },\n      error => {\n        console.log(error);\n        this.loginError=true;\n        //this.router.navigate(['login'])\n      })\n  }\n  redirectUser(role:string)\n  {\n    if(role==='USER'){\n      console.log(\"User\")\n      window.location.href = 'user/homepage';\n    }\n    if(role==='ADMIN'){\n      console.log(\"Admin\")\n      window.location.href = 'admin/homepage';\n    }\n    if(role==='SU'){\n      console.log(\"SU\")\n      //window.location.href = 'superAdmin/homepage';\n      this.router.navigate([\"superAdmin/homepage\"]);\n    }\n  }\n  resetPassword()\n  {\n\n  }\n}\n","<div class=\"container box\">\n    <div class=\"mb-4\">\n        <h1 class=\"fw-bold text-center title\">SNVA CRM</h1>\n    </div>\n    <div class=\"row justify-content-center\">\n        <div class=\"card col-12 col-md-6 col-lg-4 border border-success-subtle cardBackGround\">\n            <!-- Your login form or content here -->\n            <h1 class=\"mt-4 text-center text_font text-white\">Welcome</h1>\n            <p class=\"mb-3 text-center sub-text text_font text-white\">Log in to continue</p>\n            <form (submit)=\"logIn()\"> <!--need to add submit action ngSubmit and ngModel for username and password-->\n                <div class=\"mb-3 text-start\">\n                    <label for=\"username\" class=\"form-label text_font text-white\">Email / Username</label> <input\n                        type=\"text\" class=\"form-control\" name=\"username\" id=\"username\" [(ngModel)]=\"user.username\" required>\n                </div>\n                <div class=\"mb-3 text-start\" >\n                    <label for=\"password\" class=\"form-label text_font text-white\">Password</label> <input\n                        type=\"password\" class=\"form-control\" name=\"password\" id=\"password\" [(ngModel)]=\"user.password\" required>\n                </div>\n                <div class=\"container d-flex justify-content-center align-items-center\">\n                    <button type=\"submit\" class=\"btn btn-success btn-long-bar mb-4 \">Login</button>\n                </div>\n                <div>\n                    <p class=\"text-center text_font text-white\" (click)=\"resetPassword()\">Forgot Your Password?</p>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n\n\n"],"mappings":"AACA,SAAQA,IAAI,QAAO,kBAAkB;;;;;;;AAWrC,OAAM,MAAOC,SAAS;EAIAC,GAAA;EAAoCC,IAAA;EAA0BC,MAAA;EAAwBC,MAAA;EAF1GC,IAAI,GAAQ,IAAIN,IAAI,EAAE;EACtBO,UAAU,GAAW,KAAK;EAC1BC,YAAoBN,GAA0B,EAAUC,IAAgB,EAAUC,MAAc,EAAUC,MAAsB;IAA5G,KAAAH,GAAG,GAAHA,GAAG;IAAiC,KAAAC,IAAI,GAAJA,IAAI;IAAsB,KAAAC,MAAM,GAANA,MAAM;IAAkB,KAAAC,MAAM,GAANA,MAAM;EAAmB;EACnII,KAAKA,CAAA;IAEH;IACA,IAAI,CAACP,GAAG,CAACQ,YAAY,CAAC,IAAI,CAACJ,IAAI,CAAC,CAACK,SAAS,CAACC,IAAI,IAAE;MAE7CC,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,eAAe,EAAEC,IAAI,CAACC,SAAS,CAACL,IAAI,CAAC,CAAC;MACpE,IAAI,CAACV,GAAG,CAACgB,uBAAuB,CAAC,IAAI,CAACZ,IAAI,CAAC;MAC3C,IAAI,CAACD,MAAM,CAACc,SAAS,EAAE;MACvB,IAAI,CAACC,YAAY,CAACR,IAAI,CAACS,IAAI,CAAC;IAC9B,CAAC,EACDC,KAAK,IAAG;MACNC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MAClB,IAAI,CAACf,UAAU,GAAC,IAAI;MACpB;IACF,CAAC,CAAC;EACN;;EACAa,YAAYA,CAACC,IAAW;IAEtB,IAAGA,IAAI,KAAG,MAAM,EAAC;MACfE,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;MACnBX,MAAM,CAACY,QAAQ,CAACC,IAAI,GAAG,eAAe;;IAExC,IAAGL,IAAI,KAAG,OAAO,EAAC;MAChBE,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;MACpBX,MAAM,CAACY,QAAQ,CAACC,IAAI,GAAG,gBAAgB;;IAEzC,IAAGL,IAAI,KAAG,IAAI,EAAC;MACbE,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC;MACjB;MACA,IAAI,CAACpB,MAAM,CAACuB,QAAQ,CAAC,CAAC,qBAAqB,CAAC,CAAC;;EAEjD;EACAC,aAAaA,CAAA,GAGb;;qBAxCW3B,SAAS,EAAA4B,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,qBAAA,GAAAH,EAAA,CAAAC,iBAAA,CAAAG,EAAA,CAAAC,UAAA,GAAAL,EAAA,CAAAC,iBAAA,CAAAK,EAAA,CAAAC,MAAA,GAAAP,EAAA,CAAAC,iBAAA,CAAAO,EAAA,CAAAC,eAAA;EAAA;;UAATrC,SAAS;IAAAsC,SAAA;IAAAC,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAC,mBAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QCZtBhB,EAAA,CAAAkB,cAAA,aAA2B;QAEmBlB,EAAA,CAAAmB,MAAA,eAAQ;QAAAnB,EAAA,CAAAoB,YAAA,EAAK;QAEvDpB,EAAA,CAAAkB,cAAA,aAAwC;QAGkBlB,EAAA,CAAAmB,MAAA,cAAO;QAAAnB,EAAA,CAAAoB,YAAA,EAAK;QAC9DpB,EAAA,CAAAkB,cAAA,WAA0D;QAAAlB,EAAA,CAAAmB,MAAA,yBAAkB;QAAAnB,EAAA,CAAAoB,YAAA,EAAI;QAChFpB,EAAA,CAAAkB,cAAA,eAAyB;QAAnBlB,EAAA,CAAAqB,UAAA,oBAAAC,2CAAA;UAAA,OAAUL,GAAA,CAAArC,KAAA,EAAO;QAAA,EAAC;QACpBoB,EAAA,CAAAkB,cAAA,cAA6B;QACqClB,EAAA,CAAAmB,MAAA,wBAAgB;QAAAnB,EAAA,CAAAoB,YAAA,EAAQ;QAACpB,EAAA,CAAAkB,cAAA,iBACiB;QAArClB,EAAA,CAAAqB,UAAA,2BAAAE,mDAAAC,MAAA;UAAA,OAAAP,GAAA,CAAAxC,IAAA,CAAAgD,QAAA,GAAAD,MAAA;QAAA,EAA2B;QADPxB,EAAA,CAAAoB,YAAA,EACiB;QAE5GpB,EAAA,CAAAkB,cAAA,cAA8B;QACoClB,EAAA,CAAAmB,MAAA,gBAAQ;QAAAnB,EAAA,CAAAoB,YAAA,EAAQ;QAACpB,EAAA,CAAAkB,cAAA,iBAC6B;QAArClB,EAAA,CAAAqB,UAAA,2BAAAK,mDAAAF,MAAA;UAAA,OAAAP,GAAA,CAAAxC,IAAA,CAAAkD,QAAA,GAAAH,MAAA;QAAA,EAA2B;QADnBxB,EAAA,CAAAoB,YAAA,EAC6B;QAEhHpB,EAAA,CAAAkB,cAAA,eAAwE;QACHlB,EAAA,CAAAmB,MAAA,aAAK;QAAAnB,EAAA,CAAAoB,YAAA,EAAS;QAEnFpB,EAAA,CAAAkB,cAAA,WAAK;QAC2ClB,EAAA,CAAAqB,UAAA,mBAAAO,uCAAA;UAAA,OAASX,GAAA,CAAAlB,aAAA,EAAe;QAAA,EAAC;QAACC,EAAA,CAAAmB,MAAA,6BAAqB;QAAAnB,EAAA,CAAAoB,YAAA,EAAI;;;QAV5BpB,EAAA,CAAA6B,SAAA,IAA2B;QAA3B7B,EAAA,CAAA8B,UAAA,YAAAb,GAAA,CAAAxC,IAAA,CAAAgD,QAAA,CAA2B;QAIvBzB,EAAA,CAAA6B,SAAA,GAA2B;QAA3B7B,EAAA,CAAA8B,UAAA,YAAAb,GAAA,CAAAxC,IAAA,CAAAkD,QAAA,CAA2B"},"metadata":{},"sourceType":"module","externalDependencies":[]}